!function(){"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:String(n)}t.p="";var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=document.querySelector(e),this._isOpen=!1,this._handleEscCloseBound=this._handleEscClose.bind(this)}var e,r;return e=t,(r=[{key:"isOpen",value:function(){return this._isOpen}},{key:"open",value:function(){this._isOpen=!0,this._popupElement.classList.remove("popup_closed"),this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscCloseBound)}},{key:"close",value:function(){this._isOpen=!1,this._popupElement.classList.add("popup_closed"),this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscCloseBound)}},{key:"_handleEscClose",value:function(t){"Escape"==t.key&&this._isOpen&&this.close()}},{key:"_handleClickClose",value:function(t){(t.classList.contains("popup__close-icon")||t.classList.contains("popup"))&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popupElement.addEventListener("click",(function(e){t._handleClickClose(e.target)}))}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:String(e)}function c(t,e,n){return e=p(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l()?Reflect.construct(e,n||[],p(t).constructor):e.apply(t,n))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},s.apply(this,arguments)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}var y=function(t){function e(t,n){var r,o=n.submitForm,i=n.triggerSelector,u=n.onOpen,a=n.onClose,l=n.onStart;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=c(this,e,[t]))._popupElement=document.querySelector(t),r._form=r._popupElement.querySelector(".popup__form"),r._submitForm=o,r._triggerElement=document.querySelector(i),r._onOpen=null!=u?u:null,r._onClose=null!=a?a:null,r._onStart=null!=l?l:null,r}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(e,t),n=e,(r=[{key:"close",value:function(){s(p(e.prototype),"close",this).call(this),this._onClose&&this._onClose()}},{key:"open",value:function(){s(p(e.prototype),"open",this).call(this),this._onOpen&&this._onOpen()}},{key:"getForm",value:function(){return this._form}},{key:"getPopup",value:function(){return this._popupElement}},{key:"_getInputValues",value:function(t){var e=t.target;this._submitForm(e)}},{key:"setEventListeners",value:function(){var t=this;s(p(e.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._getInputValues(e)})),this._triggerElement.addEventListener("click",(function(){t.open()}))}},{key:"setPopup",value:function(){this.setEventListeners(),this._onStart&&this._onStart()}}])&&u(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(o);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=_(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function _(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:String(e)}var d=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e,this._options=n}var e,n;return e=t,n=[{key:"_makeRequest",value:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",headers:b({},this._options.headers)};return e&&(n.headers["Content-Type"]="application/json",n.body=JSON.stringify(e)),fetch("".concat(this._baseUrl).concat(t),n).then((function(t){return t.ok||Promise.reject("Error: ".concat(t.status)),t.json()}))}},{key:"getInitialCards",value:function(){return this._makeRequest("/cards")}},{key:"postCard",value:function(t){return this._makeRequest("/cards","POST",t)}},{key:"deleteCardById",value:function(t){return this._makeRequest("/cards/".concat(t),"DELETE")}},{key:"likeCardById",value:function(t){return this._makeRequest("/cards/likes/".concat(t),"PUT")}},{key:"deleteLikeCardById",value:function(t){return this._makeRequest("/cards/likes/".concat(t),"DELETE")}},{key:"getLoggedUser",value:function(){return this._makeRequest("/users/me")}},{key:"editUser",value:function(t){return this._makeRequest("/users/me","PATCH",t)}},{key:"editAvatar",value:function(t){return this._makeRequest("/users/me/avatar","PATCH",t)}}],n&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k(r.key),r)}}function k(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:String(e)}var E=function(){function t(e){var n=e.data,r=e.cardSelector,o=e.handleCardClick,i=e.handleTrashClick,u=e.api;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=n,this._cardSelector=r,this._handleCardClick=null!=o?o:null,this._handleTrashClick=i,this._api=u,this._isOwner=!1}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".posts__item").cloneNode(!0)}},{key:"_setOwner",value:function(){var t=this;this._api.getLoggedUser().then((function(e){t._isOwner=e._id===t._data.owner._id,t._isLiked=t._data.likes.find((function(t){return t._id===e._id})),t._isOwner&&t._trashButton.classList.remove("posts__trash-btn_hidden"),t._isLiked&&t._likeButton.classList.add("posts__btn-like_actived")})).catch(console.log)}},{key:"_setButtons",value:function(){this._likeButton=this._card.querySelector(".posts__btn-like"),this._trashButton=this._card.querySelector(".posts__trash-btn"),this._cardImage=this._card.querySelector(".posts__image")}},{key:"getCard",value:function(){return this._card=this._getTemplate(),this._setButtons(),this._setOwner(),this._setEventListeners(),this._likeNumberElement=this._card.querySelector(".posts__like-number"),this._card.querySelector(".posts__image").src=this._data.link,this._card.querySelector(".posts__image").alt=this._data.name,this._card.querySelector(".posts__title").textContent=this._data.name,this._likeNumberElement.textContent=this._data.likes.length,this._card}},{key:"_handleLikeButton",value:function(){var t=this;this._likeButton.classList.contains("posts__btn-like_actived")?this._api.deleteLikeCardById(this._data._id).then((function(e){t._likeButton.classList.remove("posts__btn-like_actived"),t._likeNumberElement.textContent=e.likes.length})).catch(console.log):this._api.likeCardById(this._data._id).then((function(e){t._likeButton.classList.add("posts__btn-like_actived"),t._likeNumberElement.textContent=e.likes.length})).catch(console.log)}},{key:"confirmDeleteCard",value:function(){var t=this;return this._api.deleteCardById(this._data._id).then((function(){t._card.remove()})).catch((function(t){return Promise.reject(t)}))}},{key:"_handleTrashButton",value:function(){this._handleTrashClick(this._data)}},{key:"_setEventListeners",value:function(){var t=this;this._likeButton.addEventListener("click",(function(){t._handleLikeButton()})),this._trashButton.addEventListener("click",(function(){t._handleTrashButton()})),this._handleCardClick&&this._cardImage.addEventListener("click",(function(e){t._handleCardClick(t._data)}))}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C(r.key),r)}}function C(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:String(e)}var j=function(){function t(e){var n=e.options,r=e.formElement;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=n,this._formElement=r,this._inputList=Array.from(this._formElement.querySelectorAll(this._options.inputSelector)),this._buttonElement=this._formElement.querySelector(this._options.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector("#".concat(t.id," + .").concat(this._options.errorClass));t.classList.add(this._options.inputErrorClass),n.textContent=e,n.classList.add(this._options.errorClassVisible)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector("#".concat(t.id," + .").concat(this._options.errorClass));t.classList.remove(this._options.inputErrorClass),e.classList.remove(this._options.errorClassVisible),e.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._options.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._options.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._toggleButtonState(),t._checkInputValidity(e)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}])&&O(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function q(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:String(e)}function T(t,e,n){return e=R(e),function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,B()?Reflect.construct(e,n||[],R(t).constructor):e.apply(t,n))}function B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(B=function(){return!!t})()}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}var D=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=T(this,e,[t]))._popupElement=document.querySelector(t),r._buttonConfirmationElement=r._popupElement.querySelector(".popup__btn-confirmation"),r._handleConfirmationClick=n,r}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(e,t),n=e,(r=[{key:"_confirmationClick",value:function(){this._handleConfirmationClick(),I(R(e.prototype),"close",this).call(this)}},{key:"open",value:function(){I(R(e.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){var t=this;I(R(e.prototype),"setEventListeners",this).call(this),this._buttonConfirmationElement.addEventListener("click",(function(e){t._confirmationClick()}))}}])&&L(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(o);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function A(t){var e=function(t,e){if("object"!=U(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:String(e)}function V(t,e,n){return e=H(e),function(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,M()?Reflect.construct(e,n||[],H(t).constructor):e.apply(t,n))}function M(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(M=function(){return!!t})()}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},N.apply(this,arguments)}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}var G=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=V(this,e,[t]))._popupElement=document.querySelector(t),n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(e,t),n=e,(r=[{key:"open",value:function(t){N(H(e.prototype),"open",this).call(this);var n=this._popupElement.querySelector(".popup__image-title"),r=this._popupElement.querySelector(".popup__image");n.textContent=t.name,r.src=t.link,r.alt=t.name}}])&&F(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(o);function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q(r.key),r)}}function Q(t){var e=function(t,e){if("object"!=J(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==J(e)?e:String(e)}var W=function(){function t(e,n){var r=e.items,o=e.renderer,i=e.insertMethod,u=e.emptySelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n),this._insertMethod=null!=i?i:"append",this._emptyElement=document.querySelector(u),this._emptySelector=u}var e,n;return e=t,(n=[{key:"isEmpty",value:function(){return""==this._container.innerHTML?(this._emptyElement.style.display="block",!0):(this._emptyElement.style.display="none",!1)}},{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){t._renderer(e)})),this.isEmpty()}},{key:"addItem",value:function(t){"prepend"===this._insertMethod?this._container.prepend(t):this._container.append(t)}}])&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Z(r.key),r)}}function Z(t){var e=function(t,e){if("object"!=X(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X(e)?e:String(e)}var $=function(){function t(e){var n=e.nameSelector,r=e.aboutSelector,o=e.avatarSelector,i=e.api;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(n),this._aboutElement=document.querySelector(r),this._avatarElement=document.querySelector(o),this._api=i}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return this._api.getLoggedUser().then((function(t){return t})).catch(console.log)}},{key:"setAvatar",value:function(t){this._avatarElement.src=t}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about;this._nameElement.textContent=e,this._aboutElement.textContent=n}}])&&Y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),tt=(t.p,t.p,t.p,t.p,t.p,t.p,".posts__list"),et={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__btn-submit",inactiveButtonClass:"popup__btn-submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error",errorClassVisible:"popup__error_visible"},nt=new d("https://around.nomoreparties.co/v1/web_ptbr_09",{headers:{authorization:"1146a04f-7181-45eb-9b96-3a5b76f79b15","Content-Type":"application/json"}}),rt=new $({nameSelector:".profile__name",aboutSelector:".profile__about",avatarSelector:".profile__avatar",api:nt});function ot(t){new j({formElement:t,options:et}).enableValidation()}function it(t){function e(t){var e=new G(".popup_image");e.open(t),e.setEventListeners()}var n=new W({items:t,insertMethod:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append",emptySelector:".posts__empty-text",renderer:function(t){var r=new E({data:t,cardSelector:"#posts__item",handleCardClick:e,handleTrashClick:function(){!function(t){var e=new D(".popup_confirmation",(function(){t.confirmDeleteCard().then((function(){e.close(),n.isEmpty()})).catch(console.log)}));e.open(),e.setEventListeners()}(r)},api:nt});n.addItem(r.getCard())}},tt);n.renderItems()}function ut(t){if(t){t.querySelectorAll(et.inputSelector).forEach((function(e){var n=t.querySelector("#".concat(e.id," + .").concat(et.errorClass));e.classList.remove(et.inputErrorClass),n.classList.remove(et.errorClassVisible),n.textContent=""}));var e=t.querySelector(et.submitButtonSelector);e.disabled=!0,e.classList.add(et.inactiveButtonClass),t.reset()}}nt.getInitialCards().then((function(t){it(t)})).catch((function(t){return console.log(t)})),rt.getUserInfo().then((function(t){rt.setUserInfo(t),rt.setAvatar(t.avatar)})).catch(console.log);var at=new y(".popup_add-place",{triggerSelector:".profile__btn-add",submitForm:function(t){(function(t){var e={name:t.title.value,link:t.image.value},n=t.querySelector("button[type=submit]");return n.textContent="Criando...",nt.postCard(e).then((function(e){it([e],"prepend"),ut(t)})).catch((function(t){return console.log(t)})).finally((function(){n.textContent="Criar"}))})(t).then((function(){at.close()}))},onClose:function(){ut(at.getForm())},onStart:function(){ot(at.getForm())}});at.setPopup();var ct=new y(".popup_edit-profile",{triggerSelector:".profile__btn-edit",submitForm:function(t){(function(t){var e={name:t.name.value,about:t.about.value},n=t.querySelector("button[type=submit]");return n.textContent="Salvando...",nt.editUser(e).then((function(t){rt.setUserInfo(t)})).catch(console.log).finally((function(){n.textContent="Salvar"}))})(t).then((function(){ct.close()}))},onOpen:function(){var t,e;ut(ct.getForm()),t=ct.getPopup(),e=t.querySelector(".popup__form"),rt.getUserInfo().then((function(t){e.name.value=t.name,e.about.value=t.about}))},onStart:function(){ot(ct.getForm())}});ct.setPopup();var lt=new y(".popup_edit-avatar",{triggerSelector:".profile__btn-avatar-edit",submitForm:function(t){(function(t){var e=t.querySelector("button[type=submit]");return e.textContent="Salvando...",nt.editAvatar({avatar:t.link.value}).then((function(e){rt.setAvatar(e.avatar),ut(t)})).catch(console.log).finally((function(){e.textContent="Salvar"}))})(t).then((function(){lt.close()}))},onOpen:function(){ut(lt.getForm())},onStart:function(){ot(lt.getForm())}});lt.setPopup()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUUMsS0FDZHFILFNBQVEsV0FDUEYsRUFBYXZHLFlBQWMsUUFDN0IsR0FDSixFQXNDSW9ILENBQWEzTCxHQUFNdUIsTUFBSyxXQUN0QmtLLEdBQWdCbE4sT0FDbEIsR0FDRixFQUNBVSxPQUFRLFdBQ05rTCxHQUFvQnNCLEdBQWdCUCxVQUN0QyxFQUNBL0wsUUFBUyxXQUNQb0ssR0FBcUJrQyxHQUFnQlAsVUFDdkMsSUFFRk8sR0FBZ0JOLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmlwbGV0ZW4tYXJvdW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RyaXBsZXRlbi1hcm91bmQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi1hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi1hcm91bmQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4tYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi1hcm91bmQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi1hcm91bmQvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2VCb3VuZCA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBpc09wZW4oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNPcGVuO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2Nsb3NlZFwiKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2VCb3VuZCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9jbG9zZWRcIik7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlQm91bmQpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT0gXCJFc2NhcGVcIiAmJiB0aGlzLl9pc09wZW4pIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNsaWNrQ2xvc2UodGFyZ2V0KSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2UtaWNvblwiKSB8fFxyXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIilcclxuICAgICkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKGV2dC50YXJnZXQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHBvcHVwU2VsZWN0b3IsXHJcbiAgICB7IHN1Ym1pdEZvcm0sIHRyaWdnZXJTZWxlY3Rvciwgb25PcGVuLCBvbkNsb3NlLCBvblN0YXJ0IH1cclxuICApIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEZvcm0gPSBzdWJtaXRGb3JtO1xyXG4gICAgdGhpcy5fdHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRyaWdnZXJTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9vbk9wZW4gPSBvbk9wZW4gPz8gbnVsbDtcclxuICAgIHRoaXMuX29uQ2xvc2UgPSBvbkNsb3NlID8/IG51bGw7XHJcbiAgICB0aGlzLl9vblN0YXJ0ID0gb25TdGFydCA/PyBudWxsO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgaWYgKHRoaXMuX29uQ2xvc2UpIHtcclxuICAgICAgdGhpcy5fb25DbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIGlmICh0aGlzLl9vbk9wZW4pIHtcclxuICAgICAgdGhpcy5fb25PcGVuKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm07XHJcbiAgfVxyXG5cclxuICBnZXRQb3B1cCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3B1cEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoZXZ0KSB7XHJcbiAgICBjb25zdCBmb3JtID0gZXZ0LnRhcmdldDtcclxuICAgIHRoaXMuX3N1Ym1pdEZvcm0oZm9ybSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2dldElucHV0VmFsdWVzKGV2dCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl90cmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLm9wZW4oKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0UG9wdXAoKSB7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBpZiAodGhpcy5fb25TdGFydCkgdGhpcy5fb25TdGFydCgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihiYXNlVXJsLCBvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gIH1cclxuXHJcbiAgX21ha2VSZXF1ZXN0KGVuZHBvaW50LCBtZXRob2QgPSBcIkdFVFwiLCBib2R5ID0gbnVsbCkge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgbWV0aG9kLFxyXG4gICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuX29wdGlvbnMuaGVhZGVycyB9LFxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoYm9keSkge1xyXG4gICAgICBvcHRpb25zLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcclxuICAgICAgb3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9JHtlbmRwb2ludH1gLCBvcHRpb25zKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKCFyZXMub2spIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiL2NhcmRzXCIpO1xyXG4gIH1cclxuXHJcbiAgcG9zdENhcmQoY2FyZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiL2NhcmRzXCIsIFwiUE9TVFwiLCBjYXJkKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmRCeUlkKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoYC9jYXJkcy8ke2lkfWAsIFwiREVMRVRFXCIpO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmRCeUlkKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoYC9jYXJkcy9saWtlcy8ke2lkfWAsIFwiUFVUXCIpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlTGlrZUNhcmRCeUlkKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoYC9jYXJkcy9saWtlcy8ke2lkfWAsIFwiREVMRVRFXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TG9nZ2VkVXNlcigpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIi91c2Vycy9tZVwiKTtcclxuICB9XHJcblxyXG4gIGVkaXRVc2VyKGRhdGEpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIi91c2Vycy9tZVwiLCBcIlBBVENIXCIsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgZWRpdEF2YXRhcihhdmF0YXIpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIi91c2Vycy9tZS9hdmF0YXJcIiwgXCJQQVRDSFwiLCBhdmF0YXIpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVUcmFzaENsaWNrLCBhcGkgfSkge1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2sgPz8gbnVsbDtcclxuICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2xpY2sgPSBoYW5kbGVUcmFzaENsaWNrO1xyXG4gICAgdGhpcy5fYXBpID0gYXBpO1xyXG4gICAgdGhpcy5faXNPd25lciA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9zdHNfX2l0ZW1cIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0T3duZXIoKSB7XHJcbiAgICB0aGlzLl9hcGlcclxuICAgICAgLmdldExvZ2dlZFVzZXIoKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faXNPd25lciA9IHJlcy5faWQgPT09IHRoaXMuX2RhdGEub3duZXIuX2lkO1xyXG4gICAgICAgIHRoaXMuX2lzTGlrZWQgPSB0aGlzLl9kYXRhLmxpa2VzLmZpbmQoKGxpa2UpID0+IGxpa2UuX2lkID09PSByZXMuX2lkKTtcclxuICAgICAgICBpZiAodGhpcy5faXNPd25lcikge1xyXG4gICAgICAgICAgdGhpcy5fdHJhc2hCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInBvc3RzX190cmFzaC1idG5faGlkZGVuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicG9zdHNfX2J0bi1saWtlX2FjdGl2ZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xyXG4gIH1cclxuXHJcbiAgX3NldEJ1dHRvbnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzX19idG4tbGlrZVwiKTtcclxuICAgIHRoaXMuX3RyYXNoQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzX190cmFzaC1idG5cIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucG9zdHNfX2ltYWdlXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0QnV0dG9ucygpO1xyXG4gICAgdGhpcy5fc2V0T3duZXIoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9saWtlTnVtYmVyRWxlbWVudCA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5wb3N0c19fbGlrZS1udW1iZXJcIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9kYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucG9zdHNfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5wb3N0c19fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saWtlTnVtYmVyRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubGlrZXMubGVuZ3RoO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XHJcbiAgICBpZiAodGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3N0c19fYnRuLWxpa2VfYWN0aXZlZFwiKSkge1xyXG4gICAgICB0aGlzLl9hcGlcclxuICAgICAgICAuZGVsZXRlTGlrZUNhcmRCeUlkKHRoaXMuX2RhdGEuX2lkKVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInBvc3RzX19idG4tbGlrZV9hY3RpdmVkXCIpO1xyXG4gICAgICAgICAgdGhpcy5fbGlrZU51bWJlckVsZW1lbnQudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGNvbnNvbGUubG9nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2FwaVxyXG4gICAgICAgIC5saWtlQ2FyZEJ5SWQodGhpcy5fZGF0YS5faWQpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicG9zdHNfX2J0bi1saWtlX2FjdGl2ZWRcIik7XHJcbiAgICAgICAgICB0aGlzLl9saWtlTnVtYmVyRWxlbWVudC50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uZmlybURlbGV0ZUNhcmQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkQnlJZCh0aGlzLl9kYXRhLl9pZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBQcm9taXNlLnJlamVjdChlcnIpKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVUcmFzaEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2xpY2sodGhpcy5fZGF0YSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVRyYXNoQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAodGhpcy5faGFuZGxlQ2FyZENsaWNrKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9kYXRhKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHsgb3B0aW9ucywgZm9ybUVsZW1lbnQgfSkge1xyXG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9vcHRpb25zLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX29wdGlvbnMuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9ICsgLiR7dGhpcy5fb3B0aW9ucy5lcnJvckNsYXNzfWBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vcHRpb25zLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vcHRpb25zLmVycm9yQ2xhc3NWaXNpYmxlKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9ICsgLiR7dGhpcy5fb3B0aW9ucy5lcnJvckNsYXNzfWBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcHRpb25zLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcHRpb25zLmVycm9yQ2xhc3NWaXNpYmxlKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vcHRpb25zLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUNvbmZpcm1hdGlvbkNsaWNrKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9idXR0b25Db25maXJtYXRpb25FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBvcHVwX19idG4tY29uZmlybWF0aW9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtYXRpb25DbGljayA9IGhhbmRsZUNvbmZpcm1hdGlvbkNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2NvbmZpcm1hdGlvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5faGFuZGxlQ29uZmlybWF0aW9uQ2xpY2soKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fYnV0dG9uQ29uZmlybWF0aW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9jb25maXJtYXRpb25DbGljaygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICBjb25zdCBpbWFnZVRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXRpdGxlXCIpO1xyXG4gICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICBpbWFnZVRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgaW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgaW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgaXRlbXMsIHJlbmRlcmVyLCBpbnNlcnRNZXRob2QsIGVtcHR5U2VsZWN0b3IgfSxcclxuICAgIGNvbnRhaW5lclNlbGVjdG9yXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnNlcnRNZXRob2QgPSBpbnNlcnRNZXRob2QgPz8gXCJhcHBlbmRcIjtcclxuICAgIHRoaXMuX2VtcHR5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZW1wdHlTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9lbXB0eVNlbGVjdG9yID0gZW1wdHlTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIGlzRW1wdHkoKSB7XHJcbiAgICBpZiAodGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9PSBcIlwiKSB7XHJcbiAgICAgIHRoaXMuX2VtcHR5RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VtcHR5RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmlzRW1wdHkoKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgc3dpdGNoICh0aGlzLl9pbnNlcnRNZXRob2QpIHtcclxuICAgICAgY2FzZSBcInByZXBlbmRcIjpcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciwgYXBpIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYWJvdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2FwaSA9IGFwaTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2FwaVxyXG4gICAgICAuZ2V0TG9nZ2VkVXNlcigpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcylcclxuICAgICAgLmNhdGNoKGNvbnNvbGUubG9nKTtcclxuICB9XHJcblxyXG4gIHNldEF2YXRhcihhdmF0YXIpIHtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGFib3V0U2VsZWN0b3IgPSBcIi5wcm9maWxlX19hYm91dFwiO1xuZXhwb3J0IGNvbnN0IG5hbWVTZWxlY3RvciA9IFwiLnByb2ZpbGVfX25hbWVcIjtcbmV4cG9ydCBjb25zdCBhdmF0YXJTZWxlY3RvciA9IFwiLnByb2ZpbGVfX2F2YXRhclwiO1xuXG5leHBvcnQgY29uc3QgcG9zdExpc3RTZWxlY3RvciA9IFwiLnBvc3RzX19saXN0XCI7XG5leHBvcnQgY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjcG9zdHNfX2l0ZW1cIjtcblxuLy8gaW1hZ2VzXG5pbXBvcnQgaW1nUGFvRGVBY3VjYXIgZnJvbSBcIi4uL2ltYWdlcy9wYW8tZGUtYWN1Y2FyLXJqLmpwZ1wiO1xuaW1wb3J0IGltZ0RlZG9EZURldXMgZnJvbSBcIi4uL2ltYWdlcy9kZWRvLWRlLWRldXMtcmouanBnXCI7XG5pbXBvcnQgaW1nQ3Jpc3RvUmVkZW50b3IgZnJvbSBcIi4uL2ltYWdlcy9jcmlzdG8tcmVkZW50b3ItcmouanBnXCI7XG5pbXBvcnQgaW1nQnV6aW9zIGZyb20gXCIuLi9pbWFnZXMvYnV6aW9zLXJqLmpwZ1wiO1xuaW1wb3J0IGltZ1Nhb1BhdWxvIGZyb20gXCIuLi9pbWFnZXMvc2FvLXBhdWxvLXNwLmpwZ1wiO1xuaW1wb3J0IGltZ0FycmFpYWxEb0NhYm8gZnJvbSBcIi4uL2ltYWdlcy9hcnJhaWFsLWRvLWNhYm8tcmouanBnXCI7XG5cbi8vIGNhcmRzIGluaWNpYWlzXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJQw6NvIGRlIEHDp8O6Y2FyLCBSSlwiLFxuICAgIGxpbms6IGltZ1Bhb0RlQWN1Y2FyLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJEZWRvIGRlIERldXMsIFJKXCIsXG4gICAgbGluazogaW1nRGVkb0RlRGV1cyxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQ3Jpc3RvIFJlZGVudG9yLCBSSlwiLFxuICAgIGxpbms6IGltZ0NyaXN0b1JlZGVudG9yLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCw7p6aW9zLCBSSlwiLFxuICAgIGxpbms6IGltZ0J1emlvcyxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiU8OjbyBQYXVsb1wiLFxuICAgIGxpbms6IGltZ1Nhb1BhdWxvLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBcnJhaWFsIGRvIENhYm8sIFJKXCIsXG4gICAgbGluazogaW1nQXJyYWlhbERvQ2FibyxcbiAgfSxcbl07XG5cbi8vIG9ww6fDtWVzIGRlIHZhbGlkYcOnw6NvIGRlIGZvcm11bMOhcmlvXG5leHBvcnQgY29uc3QgdmFsaWRhdGVPcHRpb25zID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J0bi1zdWJtaXRcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnRuLXN1Ym1pdF9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JcIixcbiAgZXJyb3JDbGFzc1Zpc2libGU6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCJpbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5pbXBvcnQge1xyXG4gIHZhbGlkYXRlT3B0aW9ucyxcclxuICBjYXJkU2VsZWN0b3IsXHJcbiAgcG9zdExpc3RTZWxlY3RvcixcclxuICBuYW1lU2VsZWN0b3IsXHJcbiAgYWJvdXRTZWxlY3RvcixcclxuICBhdmF0YXJTZWxlY3RvcixcclxufSBmcm9tIFwiLi9jb25zdGFudHNcIjtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9wdGJyXzA5XCIsIHtcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjExNDZhMDRmLTcxODEtNDVlYi05Yjk2LTNhNWI3NmY3OWIxNVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yLFxyXG4gIGFib3V0U2VsZWN0b3IsXHJcbiAgYXZhdGFyU2VsZWN0b3IsXHJcbiAgYXBpOiBhcGksXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbkZvcm0oZm9ybSkge1xyXG4gIG5ldyBGb3JtVmFsaWRhdG9yKHtcclxuICAgIGZvcm1FbGVtZW50OiBmb3JtLFxyXG4gICAgb3B0aW9uczogdmFsaWRhdGVPcHRpb25zLFxyXG4gIH0pLmVuYWJsZVZhbGlkYXRpb24oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUG9zdHMocG9zdHMsIGluc2VydE1ldGhvZCA9IFwiYXBwZW5kXCIpIHtcclxuICBmdW5jdGlvbiB0cmFzaENsaWNrKGNhcmQpIHtcclxuICAgIGNvbnN0IHBvcHVwQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcclxuICAgICAgXCIucG9wdXBfY29uZmlybWF0aW9uXCIsXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICBjYXJkXHJcbiAgICAgICAgICAuY29uZmlybURlbGV0ZUNhcmQoKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBwb3B1cENvbmZpcm1hdGlvbi5jbG9zZSgpO1xyXG4gICAgICAgICAgICBuZXdQb3N0LmlzRW1wdHkoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgcG9wdXBDb25maXJtYXRpb24ub3BlbigpO1xyXG4gICAgcG9wdXBDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhkYXRhKSB7XHJcbiAgICBjb25zdCBwb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF9pbWFnZVwiKTtcclxuICAgIHBvcHVwLm9wZW4oZGF0YSk7XHJcbiAgICBwb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyZXIoaXRlbSkge1xyXG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcclxuICAgICAgZGF0YTogaXRlbSxcclxuICAgICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICAgIGhhbmRsZVRyYXNoQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICB0cmFzaENsaWNrKGNhcmQpO1xyXG4gICAgICB9LFxyXG4gICAgICBhcGk6IGFwaSxcclxuICAgIH0pO1xyXG4gICAgbmV3UG9zdC5hZGRJdGVtKGNhcmQuZ2V0Q2FyZCgpKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IG5ld1Bvc3QgPSBuZXcgU2VjdGlvbihcclxuICAgIHtcclxuICAgICAgaXRlbXM6IHBvc3RzLFxyXG4gICAgICBpbnNlcnRNZXRob2QsXHJcbiAgICAgIGVtcHR5U2VsZWN0b3I6IFwiLnBvc3RzX19lbXB0eS10ZXh0XCIsXHJcbiAgICAgIHJlbmRlcmVyLFxyXG4gICAgfSxcclxuICAgIHBvc3RMaXN0U2VsZWN0b3JcclxuICApO1xyXG4gIG5ld1Bvc3QucmVuZGVySXRlbXMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QWxsQ2FyZHMoKSB7XHJcbiAgYXBpXHJcbiAgICAuZ2V0SW5pdGlhbENhcmRzKClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY3JlYXRlUG9zdHMocmVzKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldElucHV0c1Byb2ZpbGUocG9wdXApIHtcclxuICBjb25zdCBmb3JtID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICB1c2VySW5mby5nZXRVc2VySW5mbygpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgZm9ybS5uYW1lLnZhbHVlID0gcmVzLm5hbWU7XHJcbiAgICBmb3JtLmFib3V0LnZhbHVlID0gcmVzLmFib3V0O1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldFZhbGlkYXRpb25Gb3JtKGZvcm0pIHtcclxuICBpZiAoZm9ybSkge1xyXG4gICAgLy8gcmVtb3ZlciB0b2RhcyBhcyBtZW5zYWdlbnMgZGUgZXJybyBkYSB0ZWxhXHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGVPcHRpb25zLmlucHV0U2VsZWN0b3IpO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0gKyAuJHt2YWxpZGF0ZU9wdGlvbnMuZXJyb3JDbGFzc31gXHJcbiAgICAgICk7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHZhbGlkYXRlT3B0aW9ucy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh2YWxpZGF0ZU9wdGlvbnMuZXJyb3JDbGFzc1Zpc2libGUpO1xyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gZGVzYXRpdmFyIGJvdMOjbyBkZSBzdWJtaXRcclxuICAgIGNvbnN0IGJ1dHRvbkZvcm0gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IodmFsaWRhdGVPcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIGJ1dHRvbkZvcm0uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgYnV0dG9uRm9ybS5jbGFzc0xpc3QuYWRkKHZhbGlkYXRlT3B0aW9ucy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuXHJcbiAgICBmb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG4gIHJldHVybjtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICByZXNldFZhbGlkYXRpb25Gb3JtLFxyXG4gIHNldElucHV0c1Byb2ZpbGUsXHJcbiAgZW5hYmxlVmFsaWRhdGlvbkZvcm0sXHJcbiAgY3JlYXRlUG9zdHMsXHJcbiAgZ2V0QWxsQ2FyZHMsXHJcbiAgYXBpLFxyXG4gIHVzZXJJbmZvLFxyXG59O1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGFwaSxcclxuICBjcmVhdGVQb3N0cyxcclxuICBlbmFibGVWYWxpZGF0aW9uRm9ybSxcclxuICBnZXRBbGxDYXJkcyxcclxuICByZXNldFZhbGlkYXRpb25Gb3JtLFxyXG4gIHNldElucHV0c1Byb2ZpbGUsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcbmltcG9ydCB7IHVzZXJJbmZvIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcblxyXG5nZXRBbGxDYXJkcygpO1xyXG5cclxudXNlckluZm9cclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICB1c2VySW5mby5zZXRBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goY29uc29sZS5sb2cpO1xyXG5cclxuLy8gc3VibWl0c1xyXG5mdW5jdGlvbiBzdWJtaXRQb3N0KGZvcm0pIHtcclxuICBjb25zdCBwb3N0ID0ge1xyXG4gICAgbmFtZTogZm9ybS50aXRsZS52YWx1ZSxcclxuICAgIGxpbms6IGZvcm0uaW1hZ2UudmFsdWUsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgYnV0dG9uU3VibWl0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uW3R5cGU9c3VibWl0XVwiKTtcclxuICBidXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSBcIkNyaWFuZG8uLi5cIjtcclxuXHJcbiAgcmV0dXJuIGFwaVxyXG4gICAgLnBvc3RDYXJkKHBvc3QpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNyZWF0ZVBvc3RzKFtyZXNdLCBcInByZXBlbmRcIik7XHJcbiAgICAgIHJlc2V0VmFsaWRhdGlvbkZvcm0oZm9ybSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IFwiQ3JpYXJcIjtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRQcm9maWxlKGZvcm0pIHtcclxuICBjb25zdCBuZXdVc2VySW5mbyA9IHtcclxuICAgIG5hbWU6IGZvcm0ubmFtZS52YWx1ZSxcclxuICAgIGFib3V0OiBmb3JtLmFib3V0LnZhbHVlLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGJ1dHRvblN1Ym1pdCA9IGZvcm0ucXVlcnlTZWxlY3RvcihcImJ1dHRvblt0eXBlPXN1Ym1pdF1cIik7XHJcbiAgYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gXCJTYWx2YW5kby4uLlwiO1xyXG5cclxuICByZXR1cm4gYXBpXHJcbiAgICAuZWRpdFVzZXIobmV3VXNlckluZm8pXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUubG9nKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBidXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSBcIlNhbHZhclwiO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdEF2YXRhcihmb3JtKSB7XHJcbiAgY29uc3QgYnV0dG9uU3VibWl0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uW3R5cGU9c3VibWl0XVwiKTtcclxuICBidXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSBcIlNhbHZhbmRvLi4uXCI7XHJcbiAgcmV0dXJuIGFwaVxyXG4gICAgLmVkaXRBdmF0YXIoeyBhdmF0YXI6IGZvcm0ubGluay52YWx1ZSB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgICAgIHJlc2V0VmFsaWRhdGlvbkZvcm0oZm9ybSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUubG9nKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBidXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSBcIlNhbHZhclwiO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IHBvcHVwRm9ybVBvc3QgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9hZGQtcGxhY2VcIiwge1xyXG4gIHRyaWdnZXJTZWxlY3RvcjogXCIucHJvZmlsZV9fYnRuLWFkZFwiLFxyXG4gIHN1Ym1pdEZvcm06IChmb3JtKSA9PiB7XHJcbiAgICBzdWJtaXRQb3N0KGZvcm0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICBwb3B1cEZvcm1Qb3N0LmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIG9uQ2xvc2U6ICgpID0+IHtcclxuICAgIHJlc2V0VmFsaWRhdGlvbkZvcm0ocG9wdXBGb3JtUG9zdC5nZXRGb3JtKCkpO1xyXG4gIH0sXHJcbiAgb25TdGFydDogKCkgPT4ge1xyXG4gICAgZW5hYmxlVmFsaWRhdGlvbkZvcm0ocG9wdXBGb3JtUG9zdC5nZXRGb3JtKCkpO1xyXG4gIH0sXHJcbn0pO1xyXG5wb3B1cEZvcm1Qb3N0LnNldFBvcHVwKCk7XHJcblxyXG5jb25zdCBwb3B1cEZvcm1Qcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfZWRpdC1wcm9maWxlXCIsIHtcclxuICB0cmlnZ2VyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2J0bi1lZGl0XCIsXHJcbiAgc3VibWl0Rm9ybTogKGZvcm0pID0+IHtcclxuICAgIHN1Ym1pdFByb2ZpbGUoZm9ybSkudGhlbigoKSA9PiB7XHJcbiAgICAgIHBvcHVwRm9ybVByb2ZpbGUuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgb25PcGVuOiAoKSA9PiB7XHJcbiAgICByZXNldFZhbGlkYXRpb25Gb3JtKHBvcHVwRm9ybVByb2ZpbGUuZ2V0Rm9ybSgpKTtcclxuICAgIHNldElucHV0c1Byb2ZpbGUocG9wdXBGb3JtUHJvZmlsZS5nZXRQb3B1cCgpKTtcclxuICB9LFxyXG4gIG9uU3RhcnQ6ICgpID0+IHtcclxuICAgIGVuYWJsZVZhbGlkYXRpb25Gb3JtKHBvcHVwRm9ybVByb2ZpbGUuZ2V0Rm9ybSgpKTtcclxuICB9LFxyXG59KTtcclxucG9wdXBGb3JtUHJvZmlsZS5zZXRQb3B1cCgpO1xyXG5cclxuY29uc3QgcG9wdXBGb3JtQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfZWRpdC1hdmF0YXJcIiwge1xyXG4gIHRyaWdnZXJTZWxlY3RvcjogXCIucHJvZmlsZV9fYnRuLWF2YXRhci1lZGl0XCIsXHJcbiAgc3VibWl0Rm9ybTogKGZvcm0pID0+IHtcclxuICAgIHN1Ym1pdEF2YXRhcihmb3JtKS50aGVuKCgpID0+IHtcclxuICAgICAgcG9wdXBGb3JtQXZhdGFyLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIG9uT3BlbjogKCkgPT4ge1xyXG4gICAgcmVzZXRWYWxpZGF0aW9uRm9ybShwb3B1cEZvcm1BdmF0YXIuZ2V0Rm9ybSgpKTtcclxuICB9LFxyXG4gIG9uU3RhcnQ6ICgpID0+IHtcclxuICAgIGVuYWJsZVZhbGlkYXRpb25Gb3JtKHBvcHVwRm9ybUF2YXRhci5nZXRGb3JtKCkpO1xyXG4gIH0sXHJcbn0pO1xyXG5wb3B1cEZvcm1BdmF0YXIuc2V0UG9wdXAoKTtcclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJwIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9wb3B1cEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfaXNPcGVuIiwiX2hhbmRsZUVzY0Nsb3NlQm91bmQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwia2V5IiwidmFsdWUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfdGhpcyIsIl9oYW5kbGVDbGlja0Nsb3NlIiwiUG9wdXBXaXRoRm9ybSIsIl9Qb3B1cCIsIl9yZWYiLCJzdWJtaXRGb3JtIiwidHJpZ2dlclNlbGVjdG9yIiwib25PcGVuIiwib25DbG9zZSIsIm9uU3RhcnQiLCJfY2FsbFN1cGVyIiwiX2Zvcm0iLCJfc3VibWl0Rm9ybSIsIl90cmlnZ2VyRWxlbWVudCIsIl9vbk9wZW4iLCJfb25DbG9zZSIsIl9vblN0YXJ0IiwiX2luaGVyaXRzIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNhbGwiLCJmb3JtIiwiX3RoaXMyIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJvcGVuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJBcGkiLCJiYXNlVXJsIiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiX29wdGlvbnMiLCJlbmRwb2ludCIsImJvZHkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJtZXRob2QiLCJoZWFkZXJzIiwiX29iamVjdFNwcmVhZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmZXRjaCIsImNvbmNhdCIsInRoZW4iLCJyZXMiLCJvayIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJqc29uIiwiX21ha2VSZXF1ZXN0IiwiY2FyZCIsImlkIiwiZGF0YSIsImF2YXRhciIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVUcmFzaENsaWNrIiwiYXBpIiwiX2RhdGEiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVUcmFzaENsaWNrIiwiX2FwaSIsIl9pc093bmVyIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldExvZ2dlZFVzZXIiLCJfaWQiLCJvd25lciIsIl9pc0xpa2VkIiwibGlrZXMiLCJmaW5kIiwibGlrZSIsIl90cmFzaEJ1dHRvbiIsIl9saWtlQnV0dG9uIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwiX2NhcmQiLCJfY2FyZEltYWdlIiwiX2dldFRlbXBsYXRlIiwiX3NldEJ1dHRvbnMiLCJfc2V0T3duZXIiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZU51bWJlckVsZW1lbnQiLCJzcmMiLCJsaW5rIiwiYWx0IiwibmFtZSIsInRleHRDb250ZW50IiwiZGVsZXRlTGlrZUNhcmRCeUlkIiwibGlrZUNhcmRCeUlkIiwiX3RoaXMzIiwiZGVsZXRlQ2FyZEJ5SWQiLCJlcnIiLCJfdGhpczQiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9oYW5kbGVUcmFzaEJ1dHRvbiIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJlcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzc1Zpc2libGUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImhhbmRsZUNvbmZpcm1hdGlvbkNsaWNrIiwiX2J1dHRvbkNvbmZpcm1hdGlvbkVsZW1lbnQiLCJfaGFuZGxlQ29uZmlybWF0aW9uQ2xpY2siLCJfY29uZmlybWF0aW9uQ2xpY2siLCJQb3B1cFdpdGhJbWFnZSIsImltYWdlVGl0bGUiLCJpbWFnZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJpbnNlcnRNZXRob2QiLCJlbXB0eVNlbGVjdG9yIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiX2luc2VydE1ldGhvZCIsIl9lbXB0eUVsZW1lbnQiLCJfZW1wdHlTZWxlY3RvciIsImlubmVySFRNTCIsInN0eWxlIiwiZGlzcGxheSIsIml0ZW0iLCJpc0VtcHR5IiwiZWxlbWVudCIsInByZXBlbmQiLCJhcHBlbmQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9hYm91dEVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsIl9yZWYyIiwiYWJvdXQiLCJwb3N0TGlzdFNlbGVjdG9yIiwidmFsaWRhdGVPcHRpb25zIiwiZm9ybVNlbGVjdG9yIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvIiwiZW5hYmxlVmFsaWRhdGlvbkZvcm0iLCJlbmFibGVWYWxpZGF0aW9uIiwiY3JlYXRlUG9zdHMiLCJwb3N0cyIsInBvcHVwIiwibmV3UG9zdCIsInBvcHVwQ29uZmlybWF0aW9uIiwiY29uZmlybURlbGV0ZUNhcmQiLCJ0cmFzaENsaWNrIiwiYWRkSXRlbSIsImdldENhcmQiLCJyZW5kZXJJdGVtcyIsInJlc2V0VmFsaWRhdGlvbkZvcm0iLCJidXR0b25Gb3JtIiwiZGlzYWJsZWQiLCJyZXNldCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJwb3B1cEZvcm1Qb3N0IiwicG9zdCIsInRpdGxlIiwiYnV0dG9uU3VibWl0IiwicG9zdENhcmQiLCJmaW5hbGx5Iiwic3VibWl0UG9zdCIsImdldEZvcm0iLCJzZXRQb3B1cCIsInBvcHVwRm9ybVByb2ZpbGUiLCJuZXdVc2VySW5mbyIsImVkaXRVc2VyIiwic3VibWl0UHJvZmlsZSIsImdldFBvcHVwIiwicG9wdXBGb3JtQXZhdGFyIiwiZWRpdEF2YXRhciIsInN1Ym1pdEF2YXRhciJdLCJzb3VyY2VSb290IjoiIn0=