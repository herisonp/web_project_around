!function(){"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:String(n)}t.p="";var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=document.querySelector(e),this._isOpen=!1,this._handleEscCloseBound=this._handleEscClose.bind(this)}var e,r;return e=t,(r=[{key:"isOpen",value:function(){return this._isOpen}},{key:"open",value:function(){this._isOpen=!0,this._popupElement.classList.remove("popup_closed"),this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscCloseBound)}},{key:"close",value:function(){this._isOpen=!1,this._popupElement.classList.add("popup_closed"),this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscCloseBound)}},{key:"_handleEscClose",value:function(t){"Escape"==t.key&&this._isOpen&&this.close()}},{key:"_handleClickClose",value:function(t){(t.classList.contains("popup__close-icon")||t.classList.contains("popup"))&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popupElement.addEventListener("click",(function(e){t._handleClickClose(e.target)}))}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:String(e)}function c(t,e,n){return e=p(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l()?Reflect.construct(e,n||[],p(t).constructor):e.apply(t,n))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},s.apply(this,arguments)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}var y=function(t){function e(t,n){var r,o=n.submitForm,i=n.triggerSelector,u=n.onOpen,a=n.onClose,l=n.onStart;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=c(this,e,[t]))._popupElement=document.querySelector(t),r._form=r._popupElement.querySelector(".popup__form"),r._submitForm=o,r._triggerElement=document.querySelector(i),r._onOpen=null!=u?u:null,r._onClose=null!=a?a:null,r._onStart=null!=l?l:null,r}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(e,t),n=e,(r=[{key:"close",value:function(){s(p(e.prototype),"close",this).call(this),this._onClose&&this._onClose()}},{key:"open",value:function(){s(p(e.prototype),"open",this).call(this),this._onOpen&&this._onOpen()}},{key:"getForm",value:function(){return this._form}},{key:"getPopup",value:function(){return this._popupElement}},{key:"_getInputValues",value:function(t){var e=t.target;this._submitForm(e)}},{key:"setEventListeners",value:function(){var t=this;s(p(e.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._getInputValues(e)})),this._triggerElement.addEventListener("click",(function(){t.open()}))}},{key:"setPopup",value:function(){this.setEventListeners(),this._onStart&&this._onStart()}}])&&u(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(o);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=_(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function _(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:String(e)}var d=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e,this._options=n}var e,n;return e=t,n=[{key:"_makeRequest",value:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",headers:b({},this._options.headers)};return e&&(n.headers["Content-Type"]="application/json",n.body=JSON.stringify(e)),fetch("".concat(this._baseUrl).concat(t),n).then((function(t){return t.ok||Promise.reject("Error: ".concat(t.status)),t.json()}))}},{key:"getInitialCards",value:function(){return this._makeRequest("/cards")}},{key:"postCard",value:function(t){return this._makeRequest("cards","POST",t)}},{key:"deleteCardById",value:function(t){return this._makeRequest("/cards/".concat(t),"DELETE")}},{key:"likeCardById",value:function(t){return this._makeRequest("/cards/likes/".concat(t),"PUT")}},{key:"deleteLikeCardById",value:function(t){return this._makeRequest("/cards/likes/".concat(t),"DELETE")}},{key:"getLoggedUser",value:function(){return this._makeRequest("/users/me")}},{key:"editUser",value:function(t){return this._makeRequest("/users/me","PATCH",t)}},{key:"editAvatar",value:function(t){return this._makeRequest("/users/me/avatar","PATCH",t)}}],n&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k(r.key),r)}}function k(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:String(e)}var E=function(){function t(e){var n=e.data,r=e.cardSelector,o=e.handleCardClick,i=e.handleTrashClick,u=e.api;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=n,this._cardSelector=r,this._handleCardClick=null!=o?o:null,this._handleTrashClick=i,this._api=u,this._isOwner=!1}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".posts__item").cloneNode(!0)}},{key:"_setOwner",value:function(){var t=this;this._api.getLoggedUser().then((function(e){t._isOwner=e._id===t._data.owner._id,t._isLiked=t._data.likes.find((function(t){return t._id===e._id})),t._isOwner&&t._trashButton.classList.remove("posts__trash-btn_hidden"),t._isLiked&&t._likeButton.classList.add("posts__btn-like_actived")})).catch(console.log)}},{key:"_setButtons",value:function(){this._likeButton=this._card.querySelector(".posts__btn-like"),this._trashButton=this._card.querySelector(".posts__trash-btn"),this._cardImage=this._card.querySelector(".posts__image")}},{key:"getCard",value:function(){return this._card=this._getTemplate(),this._setButtons(),this._setOwner(),this._setEventListeners(),this._likeNumberElement=this._card.querySelector(".posts__like-number"),this._card.querySelector(".posts__image").src=this._data.link,this._card.querySelector(".posts__image").alt=this._data.name,this._card.querySelector(".posts__title").textContent=this._data.name,this._likeNumberElement.textContent=this._data.likes.length,this._card}},{key:"_handleLikeButton",value:function(){var t=this;this._likeButton.classList.contains("posts__btn-like_actived")?this._api.deleteLikeCardById(this._data._id).then((function(e){t._likeButton.classList.remove("posts__btn-like_actived"),t._likeNumberElement.textContent=e.likes.length})).catch(console.log):this._api.likeCardById(this._data._id).then((function(e){t._likeButton.classList.add("posts__btn-like_actived"),t._likeNumberElement.textContent=e.likes.length})).catch(console.log)}},{key:"confirmDeleteCard",value:function(){var t=this;return this._api.deleteCardById(this._data._id).then((function(){t._card.remove()})).catch((function(t){return Promise.reject(t)}))}},{key:"_handleTrashButton",value:function(){this._handleTrashClick(this._data)}},{key:"_setEventListeners",value:function(){var t=this;this._likeButton.addEventListener("click",(function(){t._handleLikeButton()})),this._trashButton.addEventListener("click",(function(){t._handleTrashButton()})),this._handleCardClick&&this._cardImage.addEventListener("click",(function(e){t._handleCardClick(t._data)}))}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C(r.key),r)}}function C(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:String(e)}var j=function(){function t(e){var n=e.options,r=e.formElement;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=n,this._formElement=r,this._inputList=Array.from(this._formElement.querySelectorAll(this._options.inputSelector)),this._buttonElement=this._formElement.querySelector(this._options.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector("#".concat(t.id," + .").concat(this._options.errorClass));t.classList.add(this._options.inputErrorClass),n.textContent=e,n.classList.add(this._options.errorClassVisible)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector("#".concat(t.id," + .").concat(this._options.errorClass));t.classList.remove(this._options.inputErrorClass),e.classList.remove(this._options.errorClassVisible),e.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._options.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._options.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._toggleButtonState(),t._checkInputValidity(e)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}])&&O(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function q(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:String(e)}function T(t,e,n){return e=R(e),function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,B()?Reflect.construct(e,n||[],R(t).constructor):e.apply(t,n))}function B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(B=function(){return!!t})()}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}var D=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=T(this,e,[t]))._popupElement=document.querySelector(t),r._buttonConfirmationElement=r._popupElement.querySelector(".popup__btn-confirmation"),r._handleConfirmationClick=n,r}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(e,t),n=e,(r=[{key:"_confirmationClick",value:function(){this._handleConfirmationClick(),I(R(e.prototype),"close",this).call(this)}},{key:"open",value:function(){I(R(e.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){var t=this;I(R(e.prototype),"setEventListeners",this).call(this),this._buttonConfirmationElement.addEventListener("click",(function(e){t._confirmationClick()}))}}])&&L(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(o);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function A(t){var e=function(t,e){if("object"!=U(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:String(e)}function V(t,e,n){return e=H(e),function(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,M()?Reflect.construct(e,n||[],H(t).constructor):e.apply(t,n))}function M(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(M=function(){return!!t})()}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},N.apply(this,arguments)}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}var G=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=V(this,e,[t]))._popupElement=document.querySelector(t),n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(e,t),n=e,(r=[{key:"open",value:function(t){N(H(e.prototype),"open",this).call(this);var n=this._popupElement.querySelector(".popup__image-title"),r=this._popupElement.querySelector(".popup__image");n.textContent=t.name,r.src=t.link,r.alt=t.name}}])&&F(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(o);function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q(r.key),r)}}function Q(t){var e=function(t,e){if("object"!=J(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==J(e)?e:String(e)}var W=function(){function t(e,n){var r=e.items,o=e.renderer,i=e.insertMethod,u=e.emptySelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n),this._insertMethod=null!=i?i:"append",this._emptyElement=document.querySelector(u),this._emptySelector=u}var e,n;return e=t,(n=[{key:"isEmpty",value:function(){return""==this._container.innerHTML?(this._emptyElement.style.display="block",!0):(this._emptyElement.style.display="none",!1)}},{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){t._renderer(e)})),this.isEmpty()}},{key:"addItem",value:function(t){"prepend"===this._insertMethod?this._container.prepend(t):this._container.append(t)}}])&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Z(r.key),r)}}function Z(t){var e=function(t,e){if("object"!=X(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X(e)?e:String(e)}var $=function(){function t(e){var n=e.nameSelector,r=e.aboutSelector,o=e.avatarSelector,i=e.api;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(n),this._aboutElement=document.querySelector(r),this._avatarElement=document.querySelector(o),this._api=i}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return this._api.getLoggedUser().then((function(t){return t})).catch(console.log)}},{key:"setAvatar",value:function(t){this._avatarElement.src=t}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about;this._nameElement.textContent=e,this._aboutElement.textContent=n}}])&&Y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),tt=(t.p,t.p,t.p,t.p,t.p,t.p,".posts__list"),et={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__btn-submit",inactiveButtonClass:"popup__btn-submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error",errorClassVisible:"popup__error_visible"},nt=new d("https://around.nomoreparties.co/v1/web_ptbr_09",{headers:{authorization:"1146a04f-7181-45eb-9b96-3a5b76f79b15","Content-Type":"application/json"}}),rt=new $({nameSelector:".profile__name",aboutSelector:".profile__about",avatarSelector:".profile__avatar",api:nt});function ot(t){new j({formElement:t,options:et}).enableValidation()}function it(t){function e(t){var e=new G(".popup_image");e.open(t),e.setEventListeners()}var n=new W({items:t,insertMethod:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append",emptySelector:".posts__empty-text",renderer:function(t){var r=new E({data:t,cardSelector:"#posts__item",handleCardClick:e,handleTrashClick:function(){!function(t){var e=new D(".popup_confirmation",(function(){t.confirmDeleteCard().then((function(){e.close(),n.isEmpty()})).catch(console.log)}));e.open(),e.setEventListeners()}(r)},api:nt});n.addItem(r.getCard())}},tt);n.renderItems()}function ut(t){if(t){t.querySelectorAll(et.inputSelector).forEach((function(e){var n=t.querySelector("#".concat(e.id," + .").concat(et.errorClass));e.classList.remove(et.inputErrorClass),n.classList.remove(et.errorClassVisible),n.textContent=""}));var e=t.querySelector(et.submitButtonSelector);e.disabled=!0,e.classList.add(et.inactiveButtonClass),t.reset()}}nt.getInitialCards().then((function(t){it(t)})).catch((function(t){return console.log(t)})),rt.getUserInfo().then((function(t){rt.setUserInfo(t),rt.setAvatar(t.avatar)})).catch(console.log);var at=new y(".popup_add-place",{triggerSelector:".profile__btn-add",submitForm:function(t){(function(t){var e={name:t.title.value,link:t.image.value},n=t.querySelector("button[type=submit]");return n.textContent="Criando...",nt.postCard(e).then((function(e){it([e],"prepend"),ut(t)})).catch((function(t){return console.log(t)})).finally((function(){n.textContent="Criar"}))})(t).then((function(){at.close()}))},onClose:function(){ut(at.getForm())},onStart:function(){ot(at.getForm())}});at.setPopup();var ct=new y(".popup_edit-profile",{triggerSelector:".profile__btn-edit",submitForm:function(t){(function(t){var e={name:t.name.value,about:t.about.value},n=t.querySelector("button[type=submit]");return n.textContent="Salvando...",nt.editUser(e).then((function(t){rt.setUserInfo(t)})).catch(console.log).finally((function(){n.textContent="Salvar"}))})(t).then((function(){ct.close()}))},onOpen:function(){var t,e;ut(ct.getForm()),t=ct.getPopup(),e=t.querySelector(".popup__form"),rt.getUserInfo().then((function(t){e.name.value=t.name,e.about.value=t.about}))},onStart:function(){ot(ct.getForm())}});ct.setPopup();var lt=new y(".popup_edit-avatar",{triggerSelector:".profile__btn-avatar-edit",submitForm:function(t){(function(t){var e=t.querySelector("button[type=submit]");return e.textContent="Salvando...",nt.editAvatar({avatar:t.link.value}).then((function(e){rt.setAvatar(e.avatar),ut(t)})).catch(console.log).finally((function(){e.textContent="Salvar"}))})(t).then((function(){lt.close()}))},onOpen:function(){ut(lt.getForm())},onStart:function(){ot(lt.getForm())}});lt.setPopup()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUUMsS0FDZHFILFNBQVEsV0FDUEYsRUFBYXZHLFlBQWMsUUFDN0IsR0FDSixFQXNDSW9ILENBQWEzTCxHQUFNdUIsTUFBSyxXQUN0QmtLLEdBQWdCbE4sT0FDbEIsR0FDRixFQUNBVSxPQUFRLFdBQ05rTCxHQUFvQnNCLEdBQWdCUCxVQUN0QyxFQUNBL0wsUUFBUyxXQUNQb0ssR0FBcUJrQyxHQUFnQlAsVUFDdkMsSUFFRk8sR0FBZ0JOLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmlwbGV0ZW4tYXJvdW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RyaXBsZXRlbi1hcm91bmQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi1hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi1hcm91bmQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4tYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi1hcm91bmQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi1hcm91bmQvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLWFyb3VuZC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2VCb3VuZCA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBpc09wZW4oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNPcGVuO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2Nsb3NlZFwiKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2VCb3VuZCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9jbG9zZWRcIik7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlQm91bmQpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT0gXCJFc2NhcGVcIiAmJiB0aGlzLl9pc09wZW4pIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNsaWNrQ2xvc2UodGFyZ2V0KSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2UtaWNvblwiKSB8fFxyXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIilcclxuICAgICkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKGV2dC50YXJnZXQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHBvcHVwU2VsZWN0b3IsXHJcbiAgICB7IHN1Ym1pdEZvcm0sIHRyaWdnZXJTZWxlY3Rvciwgb25PcGVuLCBvbkNsb3NlLCBvblN0YXJ0IH1cclxuICApIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEZvcm0gPSBzdWJtaXRGb3JtO1xyXG4gICAgdGhpcy5fdHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRyaWdnZXJTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9vbk9wZW4gPSBvbk9wZW4gPz8gbnVsbDtcclxuICAgIHRoaXMuX29uQ2xvc2UgPSBvbkNsb3NlID8/IG51bGw7XHJcbiAgICB0aGlzLl9vblN0YXJ0ID0gb25TdGFydCA/PyBudWxsO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgaWYgKHRoaXMuX29uQ2xvc2UpIHtcclxuICAgICAgdGhpcy5fb25DbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIGlmICh0aGlzLl9vbk9wZW4pIHtcclxuICAgICAgdGhpcy5fb25PcGVuKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm07XHJcbiAgfVxyXG5cclxuICBnZXRQb3B1cCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3B1cEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoZXZ0KSB7XHJcbiAgICBjb25zdCBmb3JtID0gZXZ0LnRhcmdldDtcclxuICAgIHRoaXMuX3N1Ym1pdEZvcm0oZm9ybSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2dldElucHV0VmFsdWVzKGV2dCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl90cmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLm9wZW4oKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0UG9wdXAoKSB7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBpZiAodGhpcy5fb25TdGFydCkgdGhpcy5fb25TdGFydCgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihiYXNlVXJsLCBvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gIH1cclxuXHJcbiAgX21ha2VSZXF1ZXN0KGVuZHBvaW50LCBtZXRob2QgPSBcIkdFVFwiLCBib2R5ID0gbnVsbCkge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgbWV0aG9kLFxyXG4gICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuX29wdGlvbnMuaGVhZGVycyB9LFxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoYm9keSkge1xyXG4gICAgICBvcHRpb25zLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcclxuICAgICAgb3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9JHtlbmRwb2ludH1gLCBvcHRpb25zKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKCFyZXMub2spIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiL2NhcmRzXCIpO1xyXG4gIH1cclxuXHJcbiAgcG9zdENhcmQoY2FyZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiY2FyZHNcIiwgXCJQT1NUXCIsIGNhcmQpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZEJ5SWQoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChgL2NhcmRzLyR7aWR9YCwgXCJERUxFVEVcIik7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZEJ5SWQoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChgL2NhcmRzL2xpa2VzLyR7aWR9YCwgXCJQVVRcIik7XHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlQ2FyZEJ5SWQoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChgL2NhcmRzL2xpa2VzLyR7aWR9YCwgXCJERUxFVEVcIik7XHJcbiAgfVxyXG5cclxuICBnZXRMb2dnZWRVc2VyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiL3VzZXJzL21lXCIpO1xyXG4gIH1cclxuXHJcbiAgZWRpdFVzZXIoZGF0YSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiL3VzZXJzL21lXCIsIFwiUEFUQ0hcIiwgZGF0YSk7XHJcbiAgfVxyXG5cclxuICBlZGl0QXZhdGFyKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiL3VzZXJzL21lL2F2YXRhclwiLCBcIlBBVENIXCIsIGF2YXRhcik7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZVRyYXNoQ2xpY2ssIGFwaSB9KSB7XHJcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljayA/PyBudWxsO1xyXG4gICAgdGhpcy5faGFuZGxlVHJhc2hDbGljayA9IGhhbmRsZVRyYXNoQ2xpY2s7XHJcbiAgICB0aGlzLl9hcGkgPSBhcGk7XHJcbiAgICB0aGlzLl9pc093bmVyID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5wb3N0c19faXRlbVwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRPd25lcigpIHtcclxuICAgIHRoaXMuX2FwaVxyXG4gICAgICAuZ2V0TG9nZ2VkVXNlcigpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB0aGlzLl9pc093bmVyID0gcmVzLl9pZCA9PT0gdGhpcy5fZGF0YS5vd25lci5faWQ7XHJcbiAgICAgICAgdGhpcy5faXNMaWtlZCA9IHRoaXMuX2RhdGEubGlrZXMuZmluZCgobGlrZSkgPT4gbGlrZS5faWQgPT09IHJlcy5faWQpO1xyXG4gICAgICAgIGlmICh0aGlzLl9pc093bmVyKSB7XHJcbiAgICAgICAgICB0aGlzLl90cmFzaEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwicG9zdHNfX3RyYXNoLWJ0bl9oaWRkZW5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwb3N0c19fYnRuLWxpa2VfYWN0aXZlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XHJcbiAgfVxyXG5cclxuICBfc2V0QnV0dG9ucygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucG9zdHNfX2J0bi1saWtlXCIpO1xyXG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucG9zdHNfX3RyYXNoLWJ0blwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5wb3N0c19faW1hZ2VcIik7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRCdXR0b25zKCk7XHJcbiAgICB0aGlzLl9zZXRPd25lcigpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2xpa2VOdW1iZXJFbGVtZW50ID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzX19saWtlLW51bWJlclwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucG9zdHNfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2RhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5wb3N0c19faW1hZ2VcIikuYWx0ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpa2VOdW1iZXJFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcclxuICAgIGlmICh0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcInBvc3RzX19idG4tbGlrZV9hY3RpdmVkXCIpKSB7XHJcbiAgICAgIHRoaXMuX2FwaVxyXG4gICAgICAgIC5kZWxldGVMaWtlQ2FyZEJ5SWQodGhpcy5fZGF0YS5faWQpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwicG9zdHNfX2J0bi1saWtlX2FjdGl2ZWRcIik7XHJcbiAgICAgICAgICB0aGlzLl9saWtlTnVtYmVyRWxlbWVudC50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYXBpXHJcbiAgICAgICAgLmxpa2VDYXJkQnlJZCh0aGlzLl9kYXRhLl9pZClcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwb3N0c19fYnRuLWxpa2VfYWN0aXZlZFwiKTtcclxuICAgICAgICAgIHRoaXMuX2xpa2VOdW1iZXJFbGVtZW50LnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25maXJtRGVsZXRlQ2FyZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9hcGlcclxuICAgICAgLmRlbGV0ZUNhcmRCeUlkKHRoaXMuX2RhdGEuX2lkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IFByb21pc2UucmVqZWN0KGVycikpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVRyYXNoQnV0dG9uKCkge1xyXG4gICAgdGhpcy5faGFuZGxlVHJhc2hDbGljayh0aGlzLl9kYXRhKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlVHJhc2hCdXR0b24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLl9oYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2RhdGEpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoeyBvcHRpb25zLCBmb3JtRWxlbWVudCB9KSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX29wdGlvbnMuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fb3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0gKyAuJHt0aGlzLl9vcHRpb25zLmVycm9yQ2xhc3N9YFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuZXJyb3JDbGFzc1Zpc2libGUpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0gKyAuJHt0aGlzLl9vcHRpb25zLmVycm9yQ2xhc3N9YFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29wdGlvbnMuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29wdGlvbnMuZXJyb3JDbGFzc1Zpc2libGUpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3B0aW9ucy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlQ29uZmlybWF0aW9uQ2xpY2spIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2J1dHRvbkNvbmZpcm1hdGlvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXBfX2J0bi1jb25maXJtYXRpb25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1hdGlvbkNsaWNrID0gaGFuZGxlQ29uZmlybWF0aW9uQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfY29uZmlybWF0aW9uQ2xpY2soKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtYXRpb25DbGljaygpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9idXR0b25Db25maXJtYXRpb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2NvbmZpcm1hdGlvbkNsaWNrKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIGNvbnN0IGltYWdlVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtdGl0bGVcIik7XHJcbiAgICBjb25zdCBpbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIGltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICBpbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICBpbWFnZS5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBpdGVtcywgcmVuZGVyZXIsIGluc2VydE1ldGhvZCwgZW1wdHlTZWxlY3RvciB9LFxyXG4gICAgY29udGFpbmVyU2VsZWN0b3JcclxuICApIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2luc2VydE1ldGhvZCA9IGluc2VydE1ldGhvZCA/PyBcImFwcGVuZFwiO1xyXG4gICAgdGhpcy5fZW1wdHlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbXB0eVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2VtcHR5U2VsZWN0b3IgPSBlbXB0eVNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgaXNFbXB0eSgpIHtcclxuICAgIGlmICh0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID09IFwiXCIpIHtcclxuICAgICAgdGhpcy5fZW1wdHlFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW1wdHlFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuaXNFbXB0eSgpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICBzd2l0Y2ggKHRoaXMuX2luc2VydE1ldGhvZCkge1xyXG4gICAgICBjYXNlIFwicHJlcGVuZFwiOlxyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yLCBhcGkgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hYm91dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXBpID0gYXBpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXBpXHJcbiAgICAgIC5nZXRMb2dnZWRVc2VyKClcclxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzKVxyXG4gICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xyXG4gIH1cclxuXHJcbiAgc2V0QXZhdGFyKGF2YXRhcikge1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgYWJvdXRTZWxlY3RvciA9IFwiLnByb2ZpbGVfX2Fib3V0XCI7XG5leHBvcnQgY29uc3QgbmFtZVNlbGVjdG9yID0gXCIucHJvZmlsZV9fbmFtZVwiO1xuZXhwb3J0IGNvbnN0IGF2YXRhclNlbGVjdG9yID0gXCIucHJvZmlsZV9fYXZhdGFyXCI7XG5cbmV4cG9ydCBjb25zdCBwb3N0TGlzdFNlbGVjdG9yID0gXCIucG9zdHNfX2xpc3RcIjtcbmV4cG9ydCBjb25zdCBjYXJkU2VsZWN0b3IgPSBcIiNwb3N0c19faXRlbVwiO1xuXG4vLyBpbWFnZXNcbmltcG9ydCBpbWdQYW9EZUFjdWNhciBmcm9tIFwiLi4vaW1hZ2VzL3Bhby1kZS1hY3VjYXItcmouanBnXCI7XG5pbXBvcnQgaW1nRGVkb0RlRGV1cyBmcm9tIFwiLi4vaW1hZ2VzL2RlZG8tZGUtZGV1cy1yai5qcGdcIjtcbmltcG9ydCBpbWdDcmlzdG9SZWRlbnRvciBmcm9tIFwiLi4vaW1hZ2VzL2NyaXN0by1yZWRlbnRvci1yai5qcGdcIjtcbmltcG9ydCBpbWdCdXppb3MgZnJvbSBcIi4uL2ltYWdlcy9idXppb3MtcmouanBnXCI7XG5pbXBvcnQgaW1nU2FvUGF1bG8gZnJvbSBcIi4uL2ltYWdlcy9zYW8tcGF1bG8tc3AuanBnXCI7XG5pbXBvcnQgaW1nQXJyYWlhbERvQ2FibyBmcm9tIFwiLi4vaW1hZ2VzL2FycmFpYWwtZG8tY2Fiby1yai5qcGdcIjtcblxuLy8gY2FyZHMgaW5pY2lhaXNcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlDDo28gZGUgQcOnw7pjYXIsIFJKXCIsXG4gICAgbGluazogaW1nUGFvRGVBY3VjYXIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkRlZG8gZGUgRGV1cywgUkpcIixcbiAgICBsaW5rOiBpbWdEZWRvRGVEZXVzLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJDcmlzdG8gUmVkZW50b3IsIFJKXCIsXG4gICAgbGluazogaW1nQ3Jpc3RvUmVkZW50b3IsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkLDunppb3MsIFJKXCIsXG4gICAgbGluazogaW1nQnV6aW9zLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJTw6NvIFBhdWxvXCIsXG4gICAgbGluazogaW1nU2FvUGF1bG8sXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFycmFpYWwgZG8gQ2FibywgUkpcIixcbiAgICBsaW5rOiBpbWdBcnJhaWFsRG9DYWJvLFxuICB9LFxuXTtcblxuLy8gb3DDp8O1ZXMgZGUgdmFsaWRhw6fDo28gZGUgZm9ybXVsw6FyaW9cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZU9wdGlvbnMgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnRuLXN1Ym1pdFwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idG4tc3VibWl0X2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvclwiLFxuICBlcnJvckNsYXNzVmlzaWJsZTogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiIsImltcG9ydCB7IEFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3JcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb25cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCB7XHJcbiAgdmFsaWRhdGVPcHRpb25zLFxyXG4gIGNhcmRTZWxlY3RvcixcclxuICBwb3N0TGlzdFNlbGVjdG9yLFxyXG4gIG5hbWVTZWxlY3RvcixcclxuICBhYm91dFNlbGVjdG9yLFxyXG4gIGF2YXRhclNlbGVjdG9yLFxyXG59IGZyb20gXCIuL2NvbnN0YW50c1wiO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaShcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX3B0YnJfMDlcIiwge1xyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiMTE0NmEwNGYtNzE4MS00NWViLTliOTYtM2E1Yjc2Zjc5YjE1XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3IsXHJcbiAgYWJvdXRTZWxlY3RvcixcclxuICBhdmF0YXJTZWxlY3RvcixcclxuICBhcGk6IGFwaSxcclxufSk7XHJcblxyXG5mdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uRm9ybShmb3JtKSB7XHJcbiAgbmV3IEZvcm1WYWxpZGF0b3Ioe1xyXG4gICAgZm9ybUVsZW1lbnQ6IGZvcm0sXHJcbiAgICBvcHRpb25zOiB2YWxpZGF0ZU9wdGlvbnMsXHJcbiAgfSkuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQb3N0cyhwb3N0cywgaW5zZXJ0TWV0aG9kID0gXCJhcHBlbmRcIikge1xyXG4gIGZ1bmN0aW9uIHRyYXNoQ2xpY2soY2FyZCkge1xyXG4gICAgY29uc3QgcG9wdXBDb25maXJtYXRpb24gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxyXG4gICAgICBcIi5wb3B1cF9jb25maXJtYXRpb25cIixcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIGNhcmRcclxuICAgICAgICAgIC5jb25maXJtRGVsZXRlQ2FyZCgpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcHVwQ29uZmlybWF0aW9uLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIG5ld1Bvc3QuaXNFbXB0eSgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICBwb3B1cENvbmZpcm1hdGlvbi5vcGVuKCk7XHJcbiAgICBwb3B1cENvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGRhdGEpIHtcclxuICAgIGNvbnN0IHBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX2ltYWdlXCIpO1xyXG4gICAgcG9wdXAub3BlbihkYXRhKTtcclxuICAgIHBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJlcihpdGVtKSB7XHJcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xyXG4gICAgICBkYXRhOiBpdGVtLFxyXG4gICAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgICAgaGFuZGxlVHJhc2hDbGljazogKCkgPT4ge1xyXG4gICAgICAgIHRyYXNoQ2xpY2soY2FyZCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGFwaTogYXBpLFxyXG4gICAgfSk7XHJcbiAgICBuZXdQb3N0LmFkZEl0ZW0oY2FyZC5nZXRDYXJkKCkpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbmV3UG9zdCA9IG5ldyBTZWN0aW9uKFxyXG4gICAge1xyXG4gICAgICBpdGVtczogcG9zdHMsXHJcbiAgICAgIGluc2VydE1ldGhvZCxcclxuICAgICAgZW1wdHlTZWxlY3RvcjogXCIucG9zdHNfX2VtcHR5LXRleHRcIixcclxuICAgICAgcmVuZGVyZXIsXHJcbiAgICB9LFxyXG4gICAgcG9zdExpc3RTZWxlY3RvclxyXG4gICk7XHJcbiAgbmV3UG9zdC5yZW5kZXJJdGVtcygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRBbGxDYXJkcygpIHtcclxuICBhcGlcclxuICAgIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjcmVhdGVQb3N0cyhyZXMpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0SW5wdXRzUHJvZmlsZShwb3B1cCkge1xyXG4gIGNvbnN0IGZvcm0gPSBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gIHVzZXJJbmZvLmdldFVzZXJJbmZvKCkudGhlbigocmVzKSA9PiB7XHJcbiAgICBmb3JtLm5hbWUudmFsdWUgPSByZXMubmFtZTtcclxuICAgIGZvcm0uYWJvdXQudmFsdWUgPSByZXMuYWJvdXQ7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2V0VmFsaWRhdGlvbkZvcm0oZm9ybSkge1xyXG4gIGlmIChmb3JtKSB7XHJcbiAgICAvLyByZW1vdmVyIHRvZGFzIGFzIG1lbnNhZ2VucyBkZSBlcnJvIGRhIHRlbGFcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0ZU9wdGlvbnMuaW5wdXRTZWxlY3Rvcik7XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfSArIC4ke3ZhbGlkYXRlT3B0aW9ucy5lcnJvckNsYXNzfWBcclxuICAgICAgKTtcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodmFsaWRhdGVPcHRpb25zLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHZhbGlkYXRlT3B0aW9ucy5lcnJvckNsYXNzVmlzaWJsZSk7XHJcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBkZXNhdGl2YXIgYm90w6NvIGRlIHN1Ym1pdFxyXG4gICAgY29uc3QgYnV0dG9uRm9ybSA9IGZvcm0ucXVlcnlTZWxlY3Rvcih2YWxpZGF0ZU9wdGlvbnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgYnV0dG9uRm9ybS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICBidXR0b25Gb3JtLmNsYXNzTGlzdC5hZGQodmFsaWRhdGVPcHRpb25zLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG5cclxuICAgIGZvcm0ucmVzZXQoKTtcclxuICB9XHJcbiAgcmV0dXJuO1xyXG59XHJcblxyXG5leHBvcnQge1xyXG4gIHJlc2V0VmFsaWRhdGlvbkZvcm0sXHJcbiAgc2V0SW5wdXRzUHJvZmlsZSxcclxuICBlbmFibGVWYWxpZGF0aW9uRm9ybSxcclxuICBjcmVhdGVQb3N0cyxcclxuICBnZXRBbGxDYXJkcyxcclxuICBhcGksXHJcbiAgdXNlckluZm8sXHJcbn07XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgYXBpLFxyXG4gIGNyZWF0ZVBvc3RzLFxyXG4gIGVuYWJsZVZhbGlkYXRpb25Gb3JtLFxyXG4gIGdldEFsbENhcmRzLFxyXG4gIHJlc2V0VmFsaWRhdGlvbkZvcm0sXHJcbiAgc2V0SW5wdXRzUHJvZmlsZSxcclxufSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuaW1wb3J0IHsgdXNlckluZm8gfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuXHJcbmdldEFsbENhcmRzKCk7XHJcblxyXG51c2VySW5mb1xyXG4gIC5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXMuYXZhdGFyKTtcclxuICB9KVxyXG4gIC5jYXRjaChjb25zb2xlLmxvZyk7XHJcblxyXG4vLyBzdWJtaXRzXHJcbmZ1bmN0aW9uIHN1Ym1pdFBvc3QoZm9ybSkge1xyXG4gIGNvbnN0IHBvc3QgPSB7XHJcbiAgICBuYW1lOiBmb3JtLnRpdGxlLnZhbHVlLFxyXG4gICAgbGluazogZm9ybS5pbWFnZS52YWx1ZSxcclxuICB9O1xyXG5cclxuICBjb25zdCBidXR0b25TdWJtaXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25bdHlwZT1zdWJtaXRdXCIpO1xyXG4gIGJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IFwiQ3JpYW5kby4uLlwiO1xyXG5cclxuICByZXR1cm4gYXBpXHJcbiAgICAucG9zdENhcmQocG9zdClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY3JlYXRlUG9zdHMoW3Jlc10sIFwicHJlcGVuZFwiKTtcclxuICAgICAgcmVzZXRWYWxpZGF0aW9uRm9ybShmb3JtKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gXCJDcmlhclwiO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdFByb2ZpbGUoZm9ybSkge1xyXG4gIGNvbnN0IG5ld1VzZXJJbmZvID0ge1xyXG4gICAgbmFtZTogZm9ybS5uYW1lLnZhbHVlLFxyXG4gICAgYWJvdXQ6IGZvcm0uYWJvdXQudmFsdWUsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgYnV0dG9uU3VibWl0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uW3R5cGU9c3VibWl0XVwiKTtcclxuICBidXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSBcIlNhbHZhbmRvLi4uXCI7XHJcblxyXG4gIHJldHVybiBhcGlcclxuICAgIC5lZGl0VXNlcihuZXdVc2VySW5mbylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5sb2cpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IFwiU2FsdmFyXCI7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3VibWl0QXZhdGFyKGZvcm0pIHtcclxuICBjb25zdCBidXR0b25TdWJtaXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25bdHlwZT1zdWJtaXRdXCIpO1xyXG4gIGJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IFwiU2FsdmFuZG8uLi5cIjtcclxuICByZXR1cm4gYXBpXHJcbiAgICAuZWRpdEF2YXRhcih7IGF2YXRhcjogZm9ybS5saW5rLnZhbHVlIH0pXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXMuYXZhdGFyKTtcclxuICAgICAgcmVzZXRWYWxpZGF0aW9uRm9ybShmb3JtKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5sb2cpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9IFwiU2FsdmFyXCI7XHJcbiAgICB9KTtcclxufVxyXG5cclxuY29uc3QgcG9wdXBGb3JtUG9zdCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX2FkZC1wbGFjZVwiLCB7XHJcbiAgdHJpZ2dlclNlbGVjdG9yOiBcIi5wcm9maWxlX19idG4tYWRkXCIsXHJcbiAgc3VibWl0Rm9ybTogKGZvcm0pID0+IHtcclxuICAgIHN1Ym1pdFBvc3QoZm9ybSkudGhlbigoKSA9PiB7XHJcbiAgICAgIHBvcHVwRm9ybVBvc3QuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgb25DbG9zZTogKCkgPT4ge1xyXG4gICAgcmVzZXRWYWxpZGF0aW9uRm9ybShwb3B1cEZvcm1Qb3N0LmdldEZvcm0oKSk7XHJcbiAgfSxcclxuICBvblN0YXJ0OiAoKSA9PiB7XHJcbiAgICBlbmFibGVWYWxpZGF0aW9uRm9ybShwb3B1cEZvcm1Qb3N0LmdldEZvcm0oKSk7XHJcbiAgfSxcclxufSk7XHJcbnBvcHVwRm9ybVBvc3Quc2V0UG9wdXAoKTtcclxuXHJcbmNvbnN0IHBvcHVwRm9ybVByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9lZGl0LXByb2ZpbGVcIiwge1xyXG4gIHRyaWdnZXJTZWxlY3RvcjogXCIucHJvZmlsZV9fYnRuLWVkaXRcIixcclxuICBzdWJtaXRGb3JtOiAoZm9ybSkgPT4ge1xyXG4gICAgc3VibWl0UHJvZmlsZShmb3JtKS50aGVuKCgpID0+IHtcclxuICAgICAgcG9wdXBGb3JtUHJvZmlsZS5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfSxcclxuICBvbk9wZW46ICgpID0+IHtcclxuICAgIHJlc2V0VmFsaWRhdGlvbkZvcm0ocG9wdXBGb3JtUHJvZmlsZS5nZXRGb3JtKCkpO1xyXG4gICAgc2V0SW5wdXRzUHJvZmlsZShwb3B1cEZvcm1Qcm9maWxlLmdldFBvcHVwKCkpO1xyXG4gIH0sXHJcbiAgb25TdGFydDogKCkgPT4ge1xyXG4gICAgZW5hYmxlVmFsaWRhdGlvbkZvcm0ocG9wdXBGb3JtUHJvZmlsZS5nZXRGb3JtKCkpO1xyXG4gIH0sXHJcbn0pO1xyXG5wb3B1cEZvcm1Qcm9maWxlLnNldFBvcHVwKCk7XHJcblxyXG5jb25zdCBwb3B1cEZvcm1BdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9lZGl0LWF2YXRhclwiLCB7XHJcbiAgdHJpZ2dlclNlbGVjdG9yOiBcIi5wcm9maWxlX19idG4tYXZhdGFyLWVkaXRcIixcclxuICBzdWJtaXRGb3JtOiAoZm9ybSkgPT4ge1xyXG4gICAgc3VibWl0QXZhdGFyKGZvcm0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICBwb3B1cEZvcm1BdmF0YXIuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgb25PcGVuOiAoKSA9PiB7XHJcbiAgICByZXNldFZhbGlkYXRpb25Gb3JtKHBvcHVwRm9ybUF2YXRhci5nZXRGb3JtKCkpO1xyXG4gIH0sXHJcbiAgb25TdGFydDogKCkgPT4ge1xyXG4gICAgZW5hYmxlVmFsaWRhdGlvbkZvcm0ocG9wdXBGb3JtQXZhdGFyLmdldEZvcm0oKSk7XHJcbiAgfSxcclxufSk7XHJcbnBvcHVwRm9ybUF2YXRhci5zZXRQb3B1cCgpO1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsInAiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX3BvcHVwRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9pc09wZW4iLCJfaGFuZGxlRXNjQ2xvc2VCb3VuZCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJrZXkiLCJ2YWx1ZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIl90aGlzIiwiX2hhbmRsZUNsaWNrQ2xvc2UiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiX3JlZiIsInN1Ym1pdEZvcm0iLCJ0cmlnZ2VyU2VsZWN0b3IiLCJvbk9wZW4iLCJvbkNsb3NlIiwib25TdGFydCIsIl9jYWxsU3VwZXIiLCJfZm9ybSIsIl9zdWJtaXRGb3JtIiwiX3RyaWdnZXJFbGVtZW50IiwiX29uT3BlbiIsIl9vbkNsb3NlIiwiX29uU3RhcnQiLCJfaW5oZXJpdHMiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiY2FsbCIsImZvcm0iLCJfdGhpczIiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsIkFwaSIsImJhc2VVcmwiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJfb3B0aW9ucyIsImVuZHBvaW50IiwiYm9keSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm1ldGhvZCIsImhlYWRlcnMiLCJfb2JqZWN0U3ByZWFkIiwiSlNPTiIsInN0cmluZ2lmeSIsImZldGNoIiwiY29uY2F0IiwidGhlbiIsInJlcyIsIm9rIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImpzb24iLCJfbWFrZVJlcXVlc3QiLCJjYXJkIiwiaWQiLCJkYXRhIiwiYXZhdGFyIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZVRyYXNoQ2xpY2siLCJhcGkiLCJfZGF0YSIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZVRyYXNoQ2xpY2siLCJfYXBpIiwiX2lzT3duZXIiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0TG9nZ2VkVXNlciIsIl9pZCIsIm93bmVyIiwiX2lzTGlrZWQiLCJsaWtlcyIsImZpbmQiLCJsaWtlIiwiX3RyYXNoQnV0dG9uIiwiX2xpa2VCdXR0b24iLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJfY2FyZCIsIl9jYXJkSW1hZ2UiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0QnV0dG9ucyIsIl9zZXRPd25lciIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlTnVtYmVyRWxlbWVudCIsInNyYyIsImxpbmsiLCJhbHQiLCJuYW1lIiwidGV4dENvbnRlbnQiLCJkZWxldGVMaWtlQ2FyZEJ5SWQiLCJsaWtlQ2FyZEJ5SWQiLCJfdGhpczMiLCJkZWxldGVDYXJkQnlJZCIsImVyciIsIl90aGlzNCIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZVRyYXNoQnV0dG9uIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzVmlzaWJsZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiaGFuZGxlQ29uZmlybWF0aW9uQ2xpY2siLCJfYnV0dG9uQ29uZmlybWF0aW9uRWxlbWVudCIsIl9oYW5kbGVDb25maXJtYXRpb25DbGljayIsIl9jb25maXJtYXRpb25DbGljayIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2VUaXRsZSIsImltYWdlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsImluc2VydE1ldGhvZCIsImVtcHR5U2VsZWN0b3IiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJfaW5zZXJ0TWV0aG9kIiwiX2VtcHR5RWxlbWVudCIsIl9lbXB0eVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwic3R5bGUiLCJkaXNwbGF5IiwiaXRlbSIsImlzRW1wdHkiLCJlbGVtZW50IiwicHJlcGVuZCIsImFwcGVuZCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Fib3V0RWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiX3JlZjIiLCJhYm91dCIsInBvc3RMaXN0U2VsZWN0b3IiLCJ2YWxpZGF0ZU9wdGlvbnMiLCJmb3JtU2VsZWN0b3IiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJlbmFibGVWYWxpZGF0aW9uRm9ybSIsImVuYWJsZVZhbGlkYXRpb24iLCJjcmVhdGVQb3N0cyIsInBvc3RzIiwicG9wdXAiLCJuZXdQb3N0IiwicG9wdXBDb25maXJtYXRpb24iLCJjb25maXJtRGVsZXRlQ2FyZCIsInRyYXNoQ2xpY2siLCJhZGRJdGVtIiwiZ2V0Q2FyZCIsInJlbmRlckl0ZW1zIiwicmVzZXRWYWxpZGF0aW9uRm9ybSIsImJ1dHRvbkZvcm0iLCJkaXNhYmxlZCIsInJlc2V0IiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsInBvcHVwRm9ybVBvc3QiLCJwb3N0IiwidGl0bGUiLCJidXR0b25TdWJtaXQiLCJwb3N0Q2FyZCIsImZpbmFsbHkiLCJzdWJtaXRQb3N0IiwiZ2V0Rm9ybSIsInNldFBvcHVwIiwicG9wdXBGb3JtUHJvZmlsZSIsIm5ld1VzZXJJbmZvIiwiZWRpdFVzZXIiLCJzdWJtaXRQcm9maWxlIiwiZ2V0UG9wdXAiLCJwb3B1cEZvcm1BdmF0YXIiLCJlZGl0QXZhdGFyIiwic3VibWl0QXZhdGFyIl0sInNvdXJjZVJvb3QiOiIifQ==